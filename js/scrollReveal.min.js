window.scrollReveal=function(e){"use strict";function t(t){this.docElem=e.document.documentElement;this.options=this.extend(this.defaults,t);this.self=this;if(this.options.init==true)this.init()}t.prototype={defaults:{after:"0s",enter:"bottom",move:"24px",over:"0.66s",easing:"ease-in-out",viewportFactor:.33,reset:false,init:true},init:function(){this.scrolled=false;var t=this;this.elems=Array.prototype.slice.call(this.docElem.querySelectorAll("[data-scrollReveal]"));this.elems.forEach(function(e,n){t.update(e)});var n=function(){if(!t.scrolled){t.scrolled=true;setTimeout(function(){t._scrollPage()},60)}};var r=function(){function e(){t._scrollPage();t.resizeTimeout=null}if(t.resizeTimeout){clearTimeout(t.resizeTimeout)}t.resizeTimeout=setTimeout(e,200)};e.addEventListener("scroll",n,false);e.addEventListener("resize",r,false)},_scrollPage:function(){var e=this;this.elems.forEach(function(t,n){e.update(t)});this.scrolled=false},parseLanguage:function(e){function r(e){var t=[],n=["from","the","and","then","but","with"];e.forEach(function(e,r){if(n.indexOf(e)>-1){return}t.push(e)});return t}var t=e.getAttribute("data-scrollreveal").split(/[, ]+/),n={};t=r(t);t.forEach(function(e,r){switch(e){case"enter":n.enter=t[r+1];return;case"after":n.after=t[r+1];return;case"wait":n.after=t[r+1];return;case"move":n.move=t[r+1];return;case"ease":n.move=t[r+1];n.ease="ease";return;case"ease-in":n.move=t[r+1];n.easing="ease-in";return;case"ease-in-out":n.move=t[r+1];n.easing="ease-in-out";return;case"ease-out":n.move=t[r+1];n.easing="ease-out";return;case"over":n.over=t[r+1];return;case"trigger":n.eventName=t[r+1];return;default:return}});return n},update:function(e){var t=this.genCSS(e),n=this;if(!e.getAttribute("data-scrollReveal-initialized")){e.setAttribute("style",t.initial);e.setAttribute("data-scrollReveal-initialized",true)}if(!this.isElementInViewport(e,this.options.viewportFactor)){if(this.options.reset){e.setAttribute("style",t.initial+t.reset)}return}if(this.isElementInViewport(e,this.options.viewportFactor)){if(!e.getAttribute("data-scrollReveal-completed")){e.setAttribute("style",t.target+t.transition)}if(!this.options.reset){setTimeout(function(){e.removeAttribute("style");e.setAttribute("data-scrollReveal-completed",true)},t.totalDuration)}return}},genCSS:function(e){var t=this.parseLanguage(e),n,r;if(t.enter){if(t.enter=="top"||t.enter=="bottom"){n=t.enter;r="y"}if(t.enter=="left"||t.enter=="right"){n=t.enter;r="x"}}else{if(this.options.enter=="top"||this.options.enter=="bottom"){n=this.options.enter;r="y"}if(this.options.enter=="left"||this.options.enter=="right"){n=this.options.enter;r="x"}}if(n=="top"||n=="left"){if(!typeof t.move=="undefined"){t.move="-"+t.move}else{t.move="-"+this.options.move}}var i=t.move||this.options.move,s=t.over||this.options.over,o=t.after||this.options.after,u=t.easing||this.options.easing;var a="-webkit-transition: all "+s+" "+u+" "+o+";"+"-moz-transition: all "+s+" "+u+" "+o+";"+"-o-transition: all "+s+" "+u+" "+o+";"+"transition: all "+s+" "+u+" "+o+";"+"-webkit-backface-visibility: hidden";var f="-webkit-transition: all "+s+" "+u+";"+"-moz-transition: all "+s+" "+u+";"+"-o-transition: all "+s+" "+u+";"+"transition: all "+s+" "+u+";";var l="-webkit-transform: translate"+r+"("+i+");"+"-moz-transform: translate"+r+"("+i+");"+"transform: translate"+r+"("+i+");"+"opacity: 0;";var c="-webkit-transform: translate"+r+"(0);"+"-moz-transform: translate"+r+"(0);"+"transform: translate"+r+"(0);"+"opacity: 1;";return{transition:a,initial:l,target:c,totalDuration:(parseFloat(s)+parseFloat(o))*1e3}},getViewportH:function(){var t=this.docElem["clientHeight"],n=e["innerHeight"];return t<n?n:t},getOffset:function(e){var t=0,n=0;do{if(!isNaN(e.offsetTop)){t+=e.offsetTop}if(!isNaN(e.offsetLeft)){n+=e.offsetLeft}}while(e=e.offsetParent);return{top:t,left:n}},isElementInViewport:function(t,n){var r=e.pageYOffset,i=r+this.getViewportH(),s=t.offsetHeight,o=this.getOffset(t).top,u=o+s,n=n||0;return o+s*n<=i&&u>=r},extend:function(e,t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}return e}};return t}(window)
